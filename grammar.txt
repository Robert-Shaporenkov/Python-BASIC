* = 0 or more
+ = 1 or more
? = optional(0 or 1)

statements      :  NEWLINE* expr (NEWLINE+ expr)* NEWLINE*

expr            :  KEYWORD:var IDENTIFIER EQ expr
                :  comp_expr ((KEYWORD:and|KEYWORD:or) comp_expr)*

comp_expr       :  KEYWORD:not comp_expr
                :  arith_expr ((EE_LT_GT_LTE_GTE) arith_expr)*
                
arith_expr      :  term ((PLUS|MINUS) term)*

term            :  factor((MUL|DIV) factor)*

factor          :  (PLUS|MINUS) factor
                :  power

power           :  call (POW factor)*

call            :  atom (LPAREN (expr (COMMA expr)*)? RPAREN)?

atom            :  INT|FLOAT|STRING|IDENTIFIER
                :  LPAREN expr RPAREN
                :  list_expr
                :  if_expr
                :  for_expr
                :  while_expr
                :  func_def

list_expr       :  LSQUARE (expr (COMMA expr)*)? RSQUARE
            
if_expr         :  KEYWORD:if expr KEYWORD:then 
                   (expr if_expr_b|if_expr_c?)
                   | (NEWLINE statements KEYWORD:end|if_expr_b|if_expr_c)

if_expr_b       :  KEYWORD:elif expr KEYWORD:then 
                   (expr if_expr_b|if_expr_c?)
                   | (NEWLINE statements KEYWORD:end|if_expr_b|if_expr_c)

if_expr_c       :  KEYWORD:else
                   expr
                   |  (NEWLINE statements KEYWORD:end)

for_expr        :  KEYWORD:for identifier EQ expr KEYWORD:TO expr
                   (KEYWORD:step expr)? KEYWORD:then 
                   expr
                   |  (NEWLINE statements KEYWORD:end)

while_expr      :  KEYWORD:while expr KEYWORD:then 
                   expr
                   |  (NEWLINE statements KEYWORD:end)

func_def        :  KEYWORD:func IDENTIFIER?
                   LPAREN (IDENTIFIER (COMMA IDENTIFIER)*)? RPAREN
                   (ARROW expr)
                   |  (NEWLINE statements KEYWORD:end)